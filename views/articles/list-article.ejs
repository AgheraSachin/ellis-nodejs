<%- include('../layout/common') %>
<%- include('../layout/header') %>
<div class="content-wrapper">
    <div class="">
        <!-- general form elements -->
        <div class="box box-primary">
            <div class="box-header with-border">
                <h3 class="box-title">List Articles</h3>
                <table id="example" class="display" style="width:100%">
                    <thead>
                    <tr>
                        <th>Id</th>
                        <th>Title</th>
                        <th>Category</th>
                        <th>Action</th>
                    </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </div>
        </div>
        <!-- /.box -->
    </div>
</div>
<script src="https://code.jquery.com/jquery-3.3.1.js"></script>

<script type="text/javascript">
    $(document).ready(function () {
        $('#example').DataTable({
            pageLength: 5,
            bLengthChange: false, //thought this line could hide the LengthMenu
            bInfo: false,
            scrollY: 400,
            ajax: "/get-all-articles",
            columns: [
                {
                    data: "_id",
                }, {
                    data: "title",
                }
                , {
                    data: "category.name",
                },
                {
                    "render": function (data, type, row) {
                        return '<a href="/edit-category/' + row._id + '" class="editor_edit">Edit</a> | <a href="/delete-article/' + row._id + '" class="editor_edit">Delete</a>';
                    },
                }
            ]
        });
    });
</script>
<%- include('../layout/footer') %>
